# Create Report - 성적 리포트 생성 (상대평가)

학생들의 성적 리포트를 상대평가 기준으로 생성합니다.

## 입력 파라미터

- **리포트 유형**: $1 (첫 번째 인자)
- **대상**: $2 (학생ID, 반, 또는 'all')
- **기간**: $3 (선택)
- 입력 형식: `$ARGUMENTS` = "유형 대상 [기간]"

## 사용 가능한 리포트 유형

| 유형 | 설명 | 형식 |
|-----|------|-----|
| `student` | 개인 성적표 | `student 학생ID [기간]` |
| `class` | 반별 성적표 | `class 반명 [기간]` |
| `all` | 전체 성적표 | `all [기간]` |
| `ranking` | 순위표 | `ranking [카테고리]` |

## 등급 기준 (상대평가)

학생들의 성적 순위를 기준으로 상대평가 등급을 부여합니다.

| 등급 | 상위 비율 | 설명 |
|-----|---------|------|
| **A** | 상위 20% | 최우수 |
| **B** | 상위 21% ~ 40% | 우수 |
| **C** | 상위 41% ~ 70% | 보통 |
| **D** | 하위 30% | 노력 필요 |

### 등급 산출 예시

전체 학생 50명 기준:
- **A등급**: 1위 ~ 10위 (상위 20%, 10명)
- **B등급**: 11위 ~ 20위 (상위 40%, 10명)
- **C등급**: 21위 ~ 35위 (상위 70%, 15명)
- **D등급**: 36위 ~ 50위 (하위 30%, 15명)

## 수행 작업

1. 전체 학생의 성적을 수집합니다.
2. 평균 점수 기준으로 순위를 산출합니다.
3. 순위에 따라 상대평가 등급을 부여합니다.
4. 리포트를 생성합니다.

## 출력 형식

### student - 개인 성적표
```
╔══════════════════════════════════════════════════════════════╗
║                     📋 개인 성적표                            ║
║                      (상대평가 기준)                          ║
╠══════════════════════════════════════════════════════════════╣
║  학생: 홍길동 (STU001)                                        ║
║  반: 1반                                                     ║
║  기간: 2024년 1월                                            ║
╠══════════════════════════════════════════════════════════════╣
║                                                              ║
║  📊 종합 성적                                                 ║
║  ┌────────────────────────────────────────────────────────┐  ║
║  │ 평균 점수: 820점                                       │  ║
║  │ 전체 순위: 8위 / 50명                                  │  ║
║  │ 상위 비율: 16%                                         │  ║
║  │                                                        │  ║
║  │           ┌─────────────────────┐                      │  ║
║  │           │    종합 등급: A     │                      │  ║
║  │           │    (상위 20%)       │                      │  ║
║  │           └─────────────────────┘                      │  ║
║  └────────────────────────────────────────────────────────┘  ║
║                                                              ║
║  📈 카테고리별 성적 및 등급                                   ║
║  ┌──────────────┬───────┬───────┬───────┬────────┐          ║
║  │ 카테고리     │ 평균  │ 순위  │ 상위% │ 등급   │          ║
║  ├──────────────┼───────┼───────┼───────┼────────┤          ║
║  │ 일반상식     │ 850   │ 5/50  │ 10%   │ A      │          ║
║  │ 과학         │ 780   │ 15/50 │ 30%   │ B      │          ║
║  │ 역사         │ 820   │ 9/50  │ 18%   │ A      │          ║
║  │ 지리         │ 830   │ 7/50  │ 14%   │ A      │          ║
║  └──────────────┴───────┴───────┴───────┴────────┘          ║
║                                                              ║
║  📊 등급 분포 시각화                                          ║
║                                                              ║
║  상위 20% ██████████████████░░ A (현재 위치: ●)              ║
║  상위 40% ████████████████████                               ║
║  상위 70% ████████████████████                               ║
║  하위 30% ████████████████████                               ║
║                                                              ║
╠══════════════════════════════════════════════════════════════╣
║  발급일: 2024-01-31          담당교사: _______________       ║
╚══════════════════════════════════════════════════════════════╝
```

### class - 반별 성적표
```
╔══════════════════════════════════════════════════════════════╗
║                     📋 반별 성적표                            ║
║                      (상대평가 기준)                          ║
╠══════════════════════════════════════════════════════════════╣
║  반: 1반                     기간: 2024년 1월                 ║
║  학생 수: 25명               전체 학생: 50명                  ║
╠══════════════════════════════════════════════════════════════╣
║                                                              ║
║  📊 등급별 분포                                               ║
║  ┌────────┬────────┬────────┬─────────────────────┐          ║
║  │ 등급   │ 기준   │ 인원   │ 분포                │          ║
║  ├────────┼────────┼────────┼─────────────────────┤          ║
║  │ A      │ 상위20%│ 6명    │ ████████████ 24%    │          ║
║  │ B      │ 상위40%│ 7명    │ ██████████████ 28%  │          ║
║  │ C      │ 상위70%│ 8명    │ ████████████████ 32%│          ║
║  │ D      │ 하위30%│ 4명    │ ████████ 16%        │          ║
║  └────────┴────────┴────────┴─────────────────────┘          ║
║                                                              ║
║  🏆 등급별 학생 명단                                          ║
║                                                              ║
║  【A등급】 상위 20%                                           ║
║   김철수(1위), 박지민(3위), 이서연(5위),                      ║
║   최민준(7위), 홍길동(8위), 정다은(10위)                      ║
║                                                              ║
║  【B등급】 상위 21~40%                                        ║
║   한소희(12위), 윤지호(14위), 장예준(15위),                   ║
║   임수빈(16위), 권도윤(17위), 신지우(18위), 조민서(20위)      ║
║                                                              ║
║  【C등급】 상위 41~70%                                        ║
║   강서윤(22위), 오하늘(25위), 배시우(28위),                   ║
║   송유진(30위), 노예린(31위), 문현우(32위),                   ║
║   황지안(33위), 안채원(35위)                                  ║
║                                                              ║
║  【D등급】 하위 30%                                           ║
║   서준혁(38위), 유민재(42위), 전소율(45위), 고태현(48위)      ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝
```

### ranking - 전체 순위표
```
╔══════════════════════════════════════════════════════════════╗
║                     📋 전체 순위표                            ║
║                      (상대평가 기준)                          ║
╠══════════════════════════════════════════════════════════════╣
║  총 학생: 50명               기간: 2024년 1월                 ║
╠══════════════════════════════════════════════════════════════╣
║                                                              ║
║  ┌──────┬────────┬──────┬───────┬───────┬────────┐          ║
║  │ 순위 │ 이름   │ 반   │ 평균  │ 상위% │ 등급   │          ║
║  ├──────┼────────┼──────┼───────┼───────┼────────┤          ║
║  │  1   │ 김철수 │ 1반  │ 920   │  2%   │ A      │          ║
║  │  2   │ 이영희 │ 2반  │ 905   │  4%   │ A      │          ║
║  │  3   │ 박지민 │ 1반  │ 895   │  6%   │ A      │          ║
║  │  ...                                          │          ║
║  │ 10   │ 정다은 │ 1반  │ 850   │ 20%   │ A      │          ║
║  ├──────┼────────┼──────┼───────┼───────┼────────┤          ║
║  │ 11   │ 강민서 │ 2반  │ 845   │ 22%   │ B      │          ║
║  │  ...                                          │          ║
║  │ 20   │ 조민서 │ 1반  │ 790   │ 40%   │ B      │          ║
║  ├──────┼────────┼──────┼───────┼───────┼────────┤          ║
║  │ 21   │ 백서준 │ 3반  │ 785   │ 42%   │ C      │          ║
║  │  ...                                          │          ║
║  │ 35   │ 안채원 │ 1반  │ 700   │ 70%   │ C      │          ║
║  ├──────┼────────┼──────┼───────┼───────┼────────┤          ║
║  │ 36   │ 서준혁 │ 1반  │ 695   │ 72%   │ D      │          ║
║  │  ...                                          │          ║
║  │ 50   │ 고태현 │ 3반  │ 520   │ 100%  │ D      │          ║
║  └──────┴────────┴──────┴───────┴───────┴────────┘          ║
║                                                              ║
║  📊 등급별 요약                                               ║
║  A (상위 20%): 10명 | 평균 875점 | 컷: 850점                 ║
║  B (상위 40%): 10명 | 평균 815점 | 컷: 790점                 ║
║  C (상위 70%): 15명 | 평균 740점 | 컷: 700점                 ║
║  D (하위 30%): 15명 | 평균 620점                             ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝
```

## 등급 계산 로직

```
function calculateGrade(rank, totalStudents) {
  const percentile = (rank / totalStudents) * 100;

  if (percentile <= 20) return 'A';      // 상위 20%
  if (percentile <= 40) return 'B';      // 상위 40%
  if (percentile <= 70) return 'C';      // 상위 70%
  return 'D';                            // 하위 30%
}
```

## 사용 예시

```
/project:create-report student STU001           # 개인 성적표
/project:create-report student STU001 1month    # 1개월 기준
/project:create-report class 1반                # 반별 성적표
/project:create-report all                      # 전체 성적표
/project:create-report ranking                  # 전체 순위표
/project:create-report ranking science          # 과학 순위표
```

## 주의사항

- 상대평가이므로 전체 학생 수에 따라 등급 인원이 결정됨
- 동점자 처리: 동점일 경우 같은 순위 부여, 다음 순위는 건너뜀
- 최소 인원: 5명 이상일 때 상대평가 적용 (미만 시 절대평가)
- 등급 컷 점수는 해당 기간 성적에 따라 변동됨
